\documentclass[twoside,a4paper,12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[colorlinks,
  citecolor=black,linkcolor=black,urlcolor=black]{hyperref}
\usepackage{enumitem}
\usepackage{url}
\usepackage{listings}
\usepackage{pstricks}
\usepackage{pgfplots}
\usepackage{listings}
\usepackage{hyperref}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=PHP,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\footnotesize\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

\usepackage{natbib} % bibtex

\usepackage{multicol}
\usepackage[hmargin={.12\paperwidth,.18\paperwidth},
  vmargin=.18\paperwidth,headheight=15pt]{geometry}

% Entêtes et pieds de page
\usepackage{fancyhdr}
% Configuration des en-têtes et pieds-de-page : tiré du User Guide
\fancyhead{} % clear all header fields
\fancyhead[RO,LE]{\bfseries Polytech Tours DI 3A}
\fancyhead[LO,RE]{\bfseries DB Practical Work}
\fancyfoot{} % clear all footer fields
\fancyfoot[RO,LE]{\thepage}
% Par défaut, on utilise le style fancy
\pagestyle{fancy}
% Pour la page de garde, on redéfinit le style plain
\fancypagestyle{plain}{%
  \fancyhf{} % clear all header and footer fields
  \fancyfoot[RO,LE]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}}

\usepackage[english]{babel}

\newenvironment{foreignpar}[1][english]{%
    \em\selectlanguage{#1}%
}{}
\newcommand*{\foreign}[2][english]{%
    \emph{\foreignlanguage{#1}{#2}}%
}

\title{DB Practical Work 0:\\Setting the system up}

\date{\today}

\begin{document}

\maketitle

%% RESUME -----------------------------------------------------------------
\begin{abstract}
  The following leaflet gives the steps to set the development environment up.
\end{abstract}

\tableofcontents

\clearpage

\section{Work to do}
You have to set your system up in order to get a proper development environment.

You must install the environment by following section \ref{sec:installation}.

\section{Installation}
\label{sec:installation}

Using the virtual machine is recommanded but you can also use a personnal machine (no support will be done). Choose one of the following subsection 

\subsection{On the Virtual Machine}
\begin{enumerate}
\item Download \url{https://github.com/prafiny/db-project/archive/master.zip}
\item Get the VM called "VMWARE WINDOWS 7 PRO 32 bits - MISE EN OEUVRE BDD"
\item Put the archive in the VM and unzip it.
\item Start WampServer.
\item Open a cmd prompt (Shift+Right Click on the folder \texttt{db-project-master})
\item Run \texttt{composer install}
\end{enumerate}

When you are done, you can switch to section \ref{sec:work}.

\subsection{On a personal machine}
You will need the following elements for the software to work:
\begin{itemize}
\item PHP >= 5.6
\item MySQL/MariaDB
\item Apache and PhpMyAdmin
\item Composer 
	\begin{itemize}
		\item for Windows: download and install \url{https://getcomposer.org/Composer-Setup.exe}
		\item for Linux/MacOS: open a terminal (in \texttt{db-project-master} and run php composer-setup.php)
	\end{itemize}
\item For Windows : php.exe in PATH (see\\ \url{https://john-dugan.com/add-php-windows-path-variable/})
\item No xDebug : in php.ini, comment out the lines that contain the word \texttt{xdebug} (to comment out, add \texttt{;} at the beginning)
\end{itemize}

Once you have got all the requirements fulfilled, you can proceed with the following steps :

\begin{enumerate}
\item Download \url{https://github.com/prafiny/db-project/archive/master.zip}
\item Unzip the archive somewhere.
\item Open a cmd prompt
\begin{itemize}
	\item For Windows: Shift+Right Click on the folder \texttt{db-project-master})
	\item For Linux/MacOS: Open bash (in folder \texttt{db-project-master})
\end{itemize}
\item Run \texttt{composer install} (or \texttt{php composer.phar install} if it doesn't work)
\end{enumerate}

When you are done, you can switch to section \ref{sec:work}.

\section{Get the system to work}
\label{sec:work}
\begin{enumerate}
\item You must have two databases : one for testing and one for the application
\item You must have the tables you are working on on both databases
\item Edit the config/db.yaml.example file (replacing the infos with the MySQL connection infos) and save as config/db.yaml
\item Run a server by opening a commandline (Shift+Right  folder \texttt{db-project-master}):
\begin{lstlisting}[language=bash]
php -S localhost:8888 -t www
\end{lstlisting}
\item Your application is available at the address \url{http://localhost:8888/}
\end{enumerate}




\end{document}
